<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
    <head>
        <%- include('partials/header.ejs', { title: 'Ribbit: ' + topic.name }) %>
    </head>
    <body>
        <%- include('partials/navbar.ejs') %>
        <div class="my-6">
            <h1 class="ms-3"><%- topic.name %></h1>
        </div>
        <div class="mb-3 ms-3">
            <div>
                <a class="btn btn-primary" id="createPostButton" href="/post"><i class="bi bi-plus-lg"></i> Create post</a>
                <button type="button" class="btn btn-secondary" id="btnUnsubscribeTopic" onclick="unsubscribe('<%- topic.name %>')"
                <% if (!isSubscribed) { %>
                    hidden
                <% } %>>Subscribed</button>
                <button type="button" class="btn btn-warning" id="btnSubscribeTopic" onclick="subscribe('<%- topic.name %>')"
                <% if (isSubscribed) { %>
                    hidden
                <% } %>>Subscribe</button>
            </div>
        </div>
        <div class="ms-3 col">
            <% posts.forEach((post) => { %>
                <%- include('partials/postCard.ejs', { post }) %>
            <% }); %>
        </div>
        <%- include('partials/createTopicModal.ejs'); %>
        <%- include('partials/scripts.ejs'); %>
        <script>
            <%- include('../public/javascripts/subscribeTopic.js'); %>
        </script>
    </body>
</html>